<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<h2>Sessions</h2>


<div>
    <h3>Book Session</h3>
    endpoint: http://127.0.0.1:8000/api/sessions/book/pk/
    Allowed Methods: POST
    A request is made with the id(pk) of a business to book a session with.

    <b>Request http method=POST</b>

    When request is sent, all BookedSession are queried to for an active session with logged-in user and session with id=pk.

    <h4>sample request</h4>
    curl --location 'http://127.0.0.1:8000/api/sessions/book/pk/'\

    If there is an active session, return message saying user has an active session with business

    <h4>sample response</h4>
    {
        'message': 'you have an open session with {business.name}'
    }

    If user has no active session with business, A session is created with ref_code and opened

    <h4>sample response</h4>
    {
        'message': 'you have opened a session with {business.name}',
        'session code': session.ref_code
    }
</div>

<div>
    <h3>Accept Session</h3>
    endpoint: http://127.0.0.1:8000/api/sessions/accept/pk/
    Allowed Methods: POST
    A request is made with the id(pk) of an opened BookedSession for user that is the admin of bookedsession business to accept a session request.

    <b>Request http method=POST</b>

    When request is sent, if logged-in user is admin of booked business in BookedSession, activate session.

    <h4>sample request</h4>
    curl --location 'http://127.0.0.1:8000/api/sessions/accept/pk/'\

    <h4>sample response</h4>
    {
        'message': f'Session is active. Remember to close section after you complete the session.',
        'session code': bookedsession.ref_code
    }

    If logged-in user is not admin of booked business
    <h4>sample response</h4>
    {
        'message': f'You are not the admin of {bookedsession.business.name}',
    }
</div>

<div>
    <h3>Decline Session</h3>
    endpoint: http://127.0.0.1:8000/api/sessions/decline/pk/
    Allowed Methods: POST
    A request is made with the id(pk) of an opened BookedSession for user that is the admin of bookedsession business to decline a session request.

    <b>Request http method=POST</b>

    When request is sent, if logged-in user is admin of booked business in BookedSession, activate and then close session.

    <h4>sample request</h4>
    curl --location 'http://127.0.0.1:8000/api/sessions/decline/pk/'\

    <h4>sample response</h4>
    {
        'message': f'Session is has been closed',
        'session code': bookedsession.ref_code
    }

    If logged-in user is not admin of booked business
    <h4>sample response</h4>
    {
        'message': f'You are not the admin of {bookedsession.business.name}',
    }
</div>

<div>
    <h3>User close Session</h3>
    endpoint: http://127.0.0.1:8000/api/sessions/user-close/pk/
    Allowed Methods: POST
    A request is made with the id(pk) of an active BookedSession for user that is the user of bookedsession  to close a session.

    <b>Request http method=POST</b>

    When request is sent, if logged-in user is user of BookedSession, then close session.

    <h4>sample request</h4>
    curl --location 'http://127.0.0.1:8000/api/sessions/user-close/pk/'\

    If BookedSession is active, close session
    <h4>sample response</h4>
    {
        'message': f'session closed sucessfully',
        'session code': session.ref_code
    }

    If user has no active session with BookedSession business, return message that says user has no active session
    <h4>sample response</h4>
    {
        'message': "You don't have an open session with {session.business.name}",
    }
</div>

<div>
    <h3>Admin close Session</h3>
    endpoint: http://127.0.0.1:8000/api/sessions/admin-close/pk/
    Allowed Methods: POST
    A request is made with the id(pk) of an active BookedSession for user that is the admin of bookedsession business to close a session.

    <b>Request http method=POST</b>

    When request is sent, if logged-in user is admin of BookedSession business, then close session.

    <h4>sample request</h4>
    curl --location 'http://127.0.0.1:8000/api/sessions/admin-close/pk/'\

    If BookedSession is active, close session
    <h4>sample response</h4>
    {
        'message': f'session closed sucessfully',
        'session code': session.ref_code
    }

    If user has no active session with id = pk, return message that says user has no active session
    <h4>sample response</h4>
    {
        'message': "You don't have an open session with {session.user.username}",
    }
</div>

<div>
    <h3>User's Booked Session</h3>
    endpoint: http://127.0.0.1:8000/api/sessions/user-booked/
    Allowed Methods: GET
    A request is made to filter all active BookedSession with logged-in user as user of the session.

    <b>Request http method=GET</b>

    <h4>sample request</h4>
    curl --location 'http://127.0.0.1:8000/api/sessions/user-booked/'\

    If BookedSession is active,
    <h4>sample response</h4>
    {
            {
                    "user": "logged_in user's username",
                    "admin": "business admin's username",
                    "business": "business name",
                    "opened" "True",
                    "user_closed": "False",
                    "admin_closed": "False",
                    "id": "1",
                    "active": "True",
                    "ref_code": "session ref_code",
                    "opened_date": "date session was opened(user booked session)",
                    "close": "False",
                    "closed_date": "empty(session is still active",
            },
    }
</div>

<div>
    <h3>User's Closed Session</h3>
    endpoint: http://127.0.0.1:8000/api/sessions/user-closed/
    Allowed Methods: GET
    A request is made to filter all closed BookedSession with logged-in user as user of the session.

    <b>Request http method=GET</b>

    <h4>sample request</h4>
    curl --location 'http://127.0.0.1:8000/api/sessions/user-closed/'\

    If BookedSession is closed,
    <h4>sample response</h4>
    {
            {
                    "user": "logged_in user's username",
                    "admin": "business admin's username",
                    "business": "business name",
                    "opened" "False",
                    "user_closed": "True",
                    "admin_closed": "True",
                    "id": "1",
                    "active": "False",
                    "ref_code": "session ref_code",
                    "opened_date": "date session was opened(user booked session)",
                    "close": "True",
                    "closed_date": "date session was closed",
            },
    }
</div>

<div>
    <h3>Admin's Open Session</h3>
    endpoint: http://127.0.0.1:8000/api/sessions/admin-opened/
    Allowed Methods: GET
    A request is made to filter all active BookedSession with logged-in user as admin of the session business.

    <b>Request http method=GET</b>

    <h4>sample request</h4>
    curl --location 'http://127.0.0.1:8000/api/sessions/admin-opened/'\

    <h4>sample response</h4>
    {
            {
                    "user": "session user's username",
                    "admin": "logged-in user's username",
                    "business": "business name",
                    "opened" "True",
                    "user_closed": "False",
                    "admin_closed": "False",
                    "id": "1",
                    "active": "True",
                    "ref_code": "session ref_code",
                    "opened_date": "date session was opened(user booked session)",
                    "close": "False",
                    "closed_date": "empty(session is still active",
            },
    }
</div>

<div>
    <h3>Admin's Closed Session</h3>
    endpoint: http://127.0.0.1:8000/api/sessions/admin-closed/
    Allowed Methods: GET
    A request is made to filter all closed BookedSession with logged-in user as admin of the booked session.

    <b>Request http method=GET</b>

    <h4>sample request</h4>
    curl --location 'http://127.0.0.1:8000/api/sessions/admin-closed/'\

    <h4>sample response</h4>
    {
            {
                    "user": "bookedsession user's username",
                    "admin": "logged-in user's username",
                    "business": "business name",
                    "opened" "False",
                    "user_closed": "True",
                    "admin_closed": "True",
                    "id": "1",
                    "active": "False",
                    "ref_code": "session ref_code",
                    "opened_date": "date session was opened(user booked session)",
                    "close": "True",
                    "closed_date": "date session was closed",
            },
    }
</div>

</body>
</html>